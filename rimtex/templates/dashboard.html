{% extends 'topbar.html' %}
{% load static %}
{% load form_filters %}

{% block head %}
    <title>Dashboard</title>    
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
{% endblock %}

{% block content %}
    {% include 'user_navbar.html' %}
    <div class="content">
        <div class="flex justify-between m-5">
            <h2 class="text-xl font-medium text-theme-6">
                Line 1
            </h2>
            <div>
                <select data-hide-search="true" class="w-full select2">
                    <option value="" selected>Select a Line</option>
                    <option value="Line 1">Line 1</option>
                </select>
                <input type="button" class="button bg-theme-1 text-white" value="Submit"/>
            </div>
        </div>
        <div class="intro-y grid grid-cols-12 gap-3">
            <div class="col-span-12 lg:col-span-4 2xl:col-span-4">
                <div class="intro-y box">
                    <div class="p-5">
                        <div class="preview">
                            <div id="h-bar-chart"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-span-12 lg:col-span-4">
                <div class="intro-y box">
                    <div class="p-5">
                        <div class="preview">
                            <div id="v-bar-chart" style="height: 350px;"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-span-12 lg:col-span-4 2xl:col-span-4">
                <div class="intro-y box">
                    <div class="p-5">
                        <div class="preview">
                            <div id="machineStoppage" style="height: 350px;"></div>
                        </div>
                    </div>
                </div>
            </div>            
            <div class="col-span-12 lg:col-span-3 2xl:col-span-4">
                <div class="intro-y box">
                    <div class="p-5">
                        <div class="preview">
                            <div id="override-pie-chart" style="height: 225px;"></div>
                        </div>
                    </div>
                </div>
            </div> 
            <div class="col-span-12 lg:col-span-5 2xl:col-span-4">
                <div class="intro-y box overflow-auto">
                    <div class="p-4">
                        <p class="text-center font-bold mb-2">Ageing Breakup</p>
                    <table class="table-auto w-full text-left p-5">
                        <thead>
                            <tr class="bg-gray-100 text-gray-600 uppercase text-sm leading-normal">
                                <th class="py-5 px-1">Range</th>
                                <th class="py-5 px-1">Carding</th>
                                <th class="py-5 px-1">Breaker</th>
                                <th class="py-5 px-1">Unilap</th>
                                <th class="py-5 px-1">Comber</th>
                                <th class="py-5 px-1">Finisher</th>
                                <th class="py-5 px-1">Rover</th>
                            </tr>
                        </thead>
                        <tbody class="text-gray-700 text-sm">
                            <tr class="bg-red-300">
                                <td class="py-3 px-1 font-semibold">>24</td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                            </tr>
                            <tr class="bg-orange-300">
                                <td class="py-3 px-1 font-semibold">16 - 24</td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                            </tr>
                            <tr class="bg-yellow-300">
                                <td class="py-3 px-1 font-semibold">8 - 16</td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                            </tr>
                            <tr class="bg-green-300">
                                <td class="py-3 px-1 font-semibold">0-8</td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                                <td class="py-3 px-1"></td>
                            </tr>
                        </tbody>
                    </table>
                    </div>
                </div>
            </div>
            <div class="col-span-12 lg:col-span-4">
                <div class="w-full mx-auto box">
                    <div class="p-3">
                        <p class="text-center font-bold mb-2">Non Scan</p>
                        <table class="table-auto w-full text-left">
                            <thead>
                                <tr class="bg-gray-100 text-gray-600 uppercase text-sm leading-normal">
                                    <th class="py-3 px-4">MACHINE NAME </th>
                                    <th class="py-3 px-4">NON SCAN DURATION</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-700 text-sm">
                                <tr class="border-b">
                                    <td class="py-1 px-4 font-semibold">Carding</td>
                                    <td class="py-1 px-4"></td>
                                </tr>
                                <tr class="border-b">
                                    <td class="py-1 px-4 font-semibold">Breaker</td>
                                    <td class="py-1 px-4"></td>
                                </tr>
                                <tr class="border-b">
                                    <td class="py-1 px-4 font-semibold">Comber</td>
                                    <td class="py-1 px-4"></td>
                                </tr>
                                <tr class="border-b">
                                    <td class="py-1 px-4 font-semibold">Finisher</td>
                                    <td class="py-1 px-4"></td>
                                </tr>
                                <tr class="border-b">
                                    <td class="py-1 px-4 font-semibold">Unilap</td>
                                    <td class="py-1 px-4"></td>
                                </tr>
                                <tr class="border-b">
                                    <td class="py-1 px-4 font-semibold">Roving</td>
                                    <td class="py-1 px-4"></td>
                                </tr>
                                <tr class="bg-gray-100">
                                    <td class="py-1 px-4 font-semibold">[ Total ]</td>
                                    <td class="py-1 px-4"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>           
            <div class="col-span-12 lg:col-span-12">
                <div class="w-full mx-auto mt-3">
                    <div class="bg-white shadow-md rounded-lg p-6">
                        <div class="flex justify-between">
                            <h2 class="text-lg font-semibold mb-4">Inprocess Sliver Weight Details</h2>
                            <h2 class="text-lg font-semibold mb-4">Time: 2024-06-12 12:34(LIVE)</h2>
                        </div>
                        <table class="table-auto w-full text-left">
                            <thead>
                                <tr class="bg-gray-100 text-gray-600 uppercase text-sm leading-normal">
                                    <th class="py-3 px-4">MACHINE NAME </th>
                                    <th class="py-3 px-4">AGING CANS</th>
                                    <th class="py-3 px-4">AGING CANS SLIVER IN KGs</th>
                                    <th class="py-3 px-4">IN PROCESS CANS</th>
                                    <th class="py-3 px-4">IN PROCESS CAN SLIVER IN KGs</th>
                                    <th class="py-3 px-4">TOTAL CANS</th>
                                    <th class="py-3 px-4">TOTAL SLIVER IN KGs</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-700 text-sm">
                                <tr class="border-b">
                                    <td class="py-2 px-4 font-semibold">Carding</td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                </tr>
                                <tr class="border-b">
                                    <td class="py-2 px-4 font-semibold">Breaker</td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                </tr>
                                <tr class="border-b">
                                    <td class="py-2 px-4 font-semibold">Comber</td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                </tr>
                                <tr class="border-b">
                                    <td class="py-2 px-4 font-semibold">Finisher</td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                </tr>
                                <tr class="border-b">
                                    <td class="py-2 px-4 font-semibold">Unilap</td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                </tr>
                                <tr class="border-b">
                                    <td class="py-2 px-4 font-semibold">Roving</td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                </tr>
                                <tr class="bg-gray-100">
                                    <td class="py-2 px-4 font-semibold">[ Total ]</td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                    <td class="py-2 px-4"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var options = {
            series: [{
            name: 'Completed',
            data: [44, 55, 41, 37, 22, 43, 21]
            }, {
            name: 'Progress',
            data: [53, 32, 33, 52, 13, 43, 32]
            }],
            chart: {
            type: 'bar',
            height: 350,
            stacked: true,
            },
            plotOptions: {
            bar: {
                horizontal: true,
                dataLabels: {
                total: {
                    enabled: true,
                    offsetX: 0,
                    style: {
                    fontSize: '13px',
                    fontWeight: 900
                    }
                }
                },
                borderRadius: 5
            },
            },
            stroke: {
            width: 1,
            colors: ['#fff']
            },
            colors: [ '#43A047', '#E53935'],
            title: {
                text: 'Line Progress',
                align: 'center',
                style: {
                    fontWeight:  'bold',
                    color:  '#263238'
                },
            },
            xaxis: {
                categories: [
                        'Carding',
                        'Breaker',
                        'Unilap',
                        'Comber',
                        'Finisher',
                        'Rover'
                    ],
            
            },
            yaxis: {
            title: {
                text: undefined
            },
            },
            tooltip: {
            y: {
                formatter: function (val) {
                return val + "K"
                }
            }
            },
            fill: {
            opacity: 1
            },
            legend: {
            position: 'top',
            horizontalAlign: 'left',
            offsetX: 40
            }
            };

        var vBarChart = new ApexCharts(document.querySelector("#v-bar-chart"), options);
        vBarChart.render();
        });

        var options = {
            series: [{
                name: 'No. of Times',
                type: 'column',
                data: [1, 2, 2, 1, 2, 2]
            }, {
                name: 'Duration',
                type: 'column',
                data: [1, 3, 3, 4, 4, 4]
            }],
            chart: {
                height: 350,
                type: 'bar',
                stacked: false,
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                width: [1, 1]
            },
            title: {
                text: 'Machine Stoppage',
                align: 'center',
                style: {
                    fontWeight:  'bold',
                    color:  '#263238'
                },
            },
            colors: ['#FF5733', '#581845'],
            xaxis: {
                categories: ['Carding', 'Breaker', 'Unilap', 'Comber', 'Finisher', 'Rover'],
            },
            yaxis: [{
                seriesName: 'No. of Times',
                axisTicks: {
                    show: true,
                },
                axisBorder: {
                    show: true,
                    color: '#FF5733'
                },
                labels: {
                    style: {
                        colors: '#FF5733',
                    }
                },
                title: {
                    text: "No. of Times",
                    style: {
                        color: '#FF5733',
                    }
                },
                tooltip: {
                    enabled: true
                }
            },
            {
                seriesName: 'Duration',
                opposite: true,
                axisTicks: {
                    show: true,
                },
                axisBorder: {
                    show: true,
                    color: '#581845'
                },
                labels: {
                    style: {
                        colors: '#581845',
                    }
                },
                title: {
                    text: "Duration",
                    style: {
                        color: '#581845',
                    }
                },
            }],
            tooltip: {
                fixed: {
                    enabled: true,
                    position: 'topLeft',
                    offsetY: 30,
                    offsetX: 60
                },
            },
            legend: {
                horizontalAlign: 'left',
                offsetX: 40
            }
        };

        var machineStoppage = new ApexCharts(document.querySelector("#machineStoppage"), options);
        machineStoppage.render();

        var options = {
            series: [{
                name: 'No. of Cans',
                type: 'column',
                data: [1, 2, 2, 1, 2, 2]
            }, {
                name: 'Kg of Sliver',
                type: 'column',
                data: [1, 3, 3, 4, 4, 4]
            }],
            chart: {
                height: 350,
                type: 'bar',
                stacked: false
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                width: [1, 1]
            },
            title: {
                text: 'Ageing Cans',
                align: 'center',
                style: {
                    fontWeight:  'bold',
                    color:  '#263238'
                },
            },
            xaxis: {
                categories: ['Carding', 'Breaker', 'Unilap', 'Comber', 'Finisher', 'Rover'],
            },
            yaxis: [{
                seriesName: 'No. of Cans',
                axisTicks: {
                    show: true,
                },
                axisBorder: {
                    show: true,
                    color: '#008FFB'
                },
                labels: {
                    style: {
                        colors: '#008FFB',
                    }
                },
                title: {
                    text: "No. of Cans",
                    style: {
                        color: '#008FFB',
                    }
                },
                tooltip: {
                    enabled: true
                }
            },
            {
                seriesName: 'Kg. of Silver',
                opposite: true,
                axisTicks: {
                    show: true,
                },
                axisBorder: {
                    show: true,
                    color: '#00E396'
                },
                labels: {
                    style: {
                        colors: '#00E396',
                    }
                },
                title: {
                    text: "Kg. of Silver",
                    style: {
                        color: '#00E396',
                    }
                },
            }],
            tooltip: {
                fixed: {
                    enabled: true,
                    position: 'topLeft',
                    offsetY: 30,
                    offsetX: 60
                },
            },
            legend: {
                horizontalAlign: 'left',
                offsetX: 40
            }
        };

        var vbarchart = new ApexCharts(document.querySelector("#h-bar-chart"), options);
        vbarchart.render();

        var overrideOptions = {
            series: [1, 2, 2, 2, 2, 2],
            chart: {
                type: 'pie',
                height: 265
            },
            labels: ['Carding', 'Breaker', 'Unilap', 'Comber', 'Finisher', 'Rover'],
            title: {
                text: 'Machine Override',
                align: 'center',
                style: {
                    fontWeight: 'bold',
                    color: '#263238'
                },
            },
            legend: {
                position: 'bottom',
                horizontalAlign: 'center',
                floating: false,
            },
            responsive: [{
                breakpoint: 480,
                options: {
                    chart: {
                        width: 200
                    },
                    legend: {
                        position: 'bottom'
                    }
                }
            }]
        };

        var overridePieChart = new ApexCharts(document.querySelector("#override-pie-chart"), overrideOptions);
        overridePieChart.render();

    </script>
{% endblock %}
